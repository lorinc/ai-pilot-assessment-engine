# Atomic Triggers - Clean Production Version
# Generated from: sandbox/conversation_ux_exercise/triggers_dense_format.md
# Purpose: Trigger conditions for pattern activation
# Total: 40 triggers across 4 types

# USER EXPLICIT TRIGGERS (8 triggers)
user_explicit:
  - id: T_REQUEST_HELP
    description: "User explicitly asks for help"
    keywords:
      - "help"
      - "what should I do"
      - "I'm stuck"
      - "how do I"
    situation_affinity:
      navigation: 0.8
      education: 0.6
      
  - id: T_REQUEST_EXPLANATION
    description: "User asks how something works"
    keywords:
      - "how does this work"
      - "explain"
      - "what is"
      - "tell me about"
    situation_affinity:
      education: 0.9
      discovery: 0.3
      
  - id: T_REQUEST_RECOMMENDATIONS
    description: "User asks for pilot suggestions"
    keywords:
      - "what should I build"
      - "recommend"
      - "suggestions"
      - "what pilots"
    situation_affinity:
      recommendation: 0.9
      analysis: 0.5
      
  - id: T_REQUEST_PROGRESS
    description: "User asks about status"
    keywords:
      - "where are we"
      - "progress"
      - "how much done"
      - "status"
    situation_affinity:
      navigation: 0.9
      
  - id: T_REQUEST_EXPORT
    description: "User wants to save/export"
    keywords:
      - "export"
      - "save"
      - "download"
      - "report"
    situation_affinity:
      navigation: 0.7
      
  - id: T_PROVIDE_FEEDBACK
    description: "User gives feedback"
    keywords:
      - "this is wrong"
      - "actually"
      - "let me clarify"
      - "correction"
    situation_affinity:
      error_recovery: 0.6
      assessment: 0.4
      
  - id: T_RESTART_ASSESSMENT
    description: "User wants to start over"
    keywords:
      - "restart"
      - "start over"
      - "new assessment"
      - "begin again"
    situation_affinity:
      navigation: 0.8
      
  - id: T_SKIP_QUESTION
    description: "User wants to skip"
    keywords:
      - "skip"
      - "I don't know"
      - "pass"
      - "later"
    situation_affinity:
      error_recovery: 0.5
      navigation: 0.5

# USER IMPLICIT TRIGGERS (14 triggers)
user_implicit:
  - id: T_MENTION_OUTPUT
    description: "User describes an output"
    signals:
      - "mentions_deliverable"
      - "mentions_report"
      - "mentions_dashboard"
      - "mentions_forecast"
    detection: "output_keyword_detected"
    situation_affinity:
      discovery: 0.9
      assessment: 0.3
      
  - id: T_MENTION_PROBLEM
    description: "User describes a problem"
    signals:
      - "issue"
      - "problem"
      - "broken"
      - "doesn't work"
    detection: "problem_keyword_detected"
    situation_affinity:
      discovery: 0.7
      assessment: 0.5
      
  - id: T_USER_CORRECTS_SYSTEM
    description: "User points out system mistake"
    keywords:
      - "that's wrong"
      - "no, that's not right"
      - "you misunderstood"
      - "actually"
      - "correction"
      - "that doesn't make sense"
    priority: critical
    situation_affinity:
      error_recovery: 1.0
      
  - id: T_MENTION_TEAM
    description: "User mentions team/people"
    signals:
      - "team_name"
      - "role_mention"
      - "we"
      - "they"
    detection: "team_reference_detected"
    situation_affinity:
      discovery: 0.6
      scope_management: 0.4
      
  - id: T_MENTION_SYSTEM
    description: "User mentions system/tool"
    signals:
      - "system_name"
      - "Excel"
      - "Salesforce"
      - "our tool"
    detection: "system_reference_detected"
    situation_affinity:
      discovery: 0.6
      scope_management: 0.4
      
  - id: T_MENTION_PROCESS
    description: "User mentions process"
    signals:
      - "process_name"
      - "workflow"
      - "procedure"
    detection: "process_reference_detected"
    situation_affinity:
      discovery: 0.6
      scope_management: 0.4
      
  - id: T_PROVIDE_RATING
    description: "User gives quality assessment"
    signals:
      - "numbers"
      - "stars"
      - "good"
      - "bad"
      - "terrible"
      - "excellent"
    detection: "quality_assessment_detected"
    situation_affinity:
      assessment: 0.9
      
  - id: T_PROVIDE_EVIDENCE
    description: "User gives specific data"
    signals:
      - "numbers"
      - "percentages"
      - "30% of the time"
      - "last week"
    detection: "specific_data_detected"
    situation_affinity:
      assessment: 0.8
      evidence_quality: 0.7
      
  - id: T_PROVIDE_EXAMPLE
    description: "User gives concrete example"
    signals:
      - "for example"
      - "like when"
      - "last time"
    detection: "example_provided"
    situation_affinity:
      assessment: 0.7
      discovery: 0.5
      
  - id: T_EXPRESS_UNCERTAINTY
    description: "User shows uncertainty"
    signals:
      - "maybe"
      - "I think"
      - "not sure"
      - "probably"
    detection: "uncertainty_detected"
    situation_affinity:
      error_recovery: 0.6
      evidence_quality: 0.5
      
  - id: T_EXPRESS_FRUSTRATION
    description: "User shows frustration"
    signals:
      - "this is stupid"
      - "doesn't make sense"
      - "annoying"
    detection: "frustration_detected"
    situation_affinity:
      error_recovery: 0.9
      
  - id: T_EXPRESS_CONFUSION
    description: "User shows confusion"
    signals:
      - "confused"
      - "lost"
      - "don't understand"
      - "what"
    detection: "confusion_detected"
    situation_affinity:
      error_recovery: 0.9
      education: 0.6
      
  - id: T_SCOPE_AMBIGUITY
    description: "Statement lacks scope"
    signals:
      - "data quality is bad"
      - "no_scope_specified"
    detection: "ambiguous_scope"
    situation_affinity:
      scope_management: 0.9
      discovery: 0.4
      
  - id: T_ABSTRACT_STATEMENT
    description: "Vague/generic statement"
    signals:
      - "things are broken"
      - "quality is low"
      - "no_specifics"
    detection: "abstract_language"
    situation_affinity:
      discovery: 0.8
      error_recovery: 0.3
      
  - id: T_MULTIPLE_OUTPUTS
    description: "User mentions multiple outputs"
    signals:
      - "lists_several_deliverables"
    detection: "multiple_output_mentions"
    situation_affinity:
      scope_management: 0.8
      navigation: 0.5

# SYSTEM PROACTIVE TRIGGERS (12 triggers)
system_proactive:
  - id: T_OUTPUT_IDENTIFIED
    description: "Output successfully identified"
    condition: "discovery_engine_found_output_with_high_confidence"
    threshold: 0.7
    situation_affinity:
      assessment: 0.7
      navigation: 0.5
      
  - id: T_ASSESSMENT_SUFFICIENT
    description: "Enough data for recommendations"
    condition: "3_or_more_components_assessed_OR_user_requested_recommendations"
    situation_affinity:
      recommendation: 0.8
      analysis: 0.6
      
  - id: T_BOTTLENECK_IDENTIFIED
    description: "Bottleneck analysis complete"
    condition: "MIN_calculation_done_bottleneck_found"
    situation_affinity:
      recommendation: 0.9
      analysis: 0.5
      
  - id: T_LOW_CONFIDENCE_DATA
    description: "Evidence quality is low"
    condition: "multiple_tier_4_5_evidence_statements"
    situation_affinity:
      evidence_quality: 0.8
      assessment: 0.4
      
  - id: T_CONFLICTING_EVIDENCE
    description: "Contradictory statements detected"
    condition: "current_statement_contradicts_previous"
    situation_affinity:
      error_recovery: 0.7
      evidence_quality: 0.6
      
  - id: T_MILESTONE_REACHED
    description: "Natural break point"
    condition: "output_fully_assessed_OR_recommendations_shown"
    situation_affinity:
      navigation: 0.8
      
  - id: T_CONTEXT_THIN
    description: "Entity lacks description"
    condition: "system_team_or_process_identified_but_no_context"
    situation_affinity:
      discovery: 0.7
      assessment: 0.5
      
  - id: T_MULTIPLE_OUTPUTS_ACTIVE
    description: "Multiple outputs in progress"
    condition: "user_working_on_2_or_more_outputs"
    situation_affinity:
      scope_management: 0.8
      navigation: 0.7
      
  - id: T_SESSION_RESUME
    description: "Returning user"
    condition: "user_has_previous_session_data"
    situation_affinity:
      navigation: 0.7
      education: 0.3
      
  - id: T_FIRST_TIME_USER
    description: "New user detected"
    condition: "no_previous_sessions"
    situation_affinity:
      education: 0.9
      discovery: 0.5
      
  - id: T_SPARSE_KNOWLEDGE_DETECTED
    description: "Multiple outputs but shallow assessment"
    condition: "3_or_more_outputs_identified_all_with_less_than_2_components_assessed"
    situation_affinity:
      navigation: 0.8
      recommendation: 0.6
      scope_management: 0.5
      
  - id: T_BREADTH_OVER_DEPTH
    description: "User exploring many outputs superficially"
    condition: "5_or_more_outputs_mentioned_none_fully_assessed"
    situation_affinity:
      navigation: 0.9
      discovery: 0.4

# SYSTEM REACTIVE TRIGGERS (6 triggers)
system_reactive:
  - id: T_PATTERN_REPETITION
    description: "Same pattern triggered 3+ times"
    response_to: "avoid_repetition_try_different_approach"
    situation_affinity:
      error_recovery: 0.6
      navigation: 0.4
      
  - id: T_USER_STUCK
    description: "No progress in 3+ turns"
    response_to: "user_not_providing_useful_data"
    situation_affinity:
      error_recovery: 0.8
      navigation: 0.5
      
  - id: T_RAPID_CORRECTIONS
    description: "User corrects multiple times"
    response_to: "user_says_no_actually_repeatedly"
    situation_affinity:
      error_recovery: 0.7
      assessment: 0.5
      
  - id: T_QUESTION_IGNORED
    description: "User didn't answer question"
    response_to: "user_changed_topic_or_gave_unrelated_response"
    situation_affinity:
      error_recovery: 0.6
      navigation: 0.4
      
  - id: T_SCOPE_CLARIFIED
    description: "User provided scope signal"
    response_to: "user_said_all_systems_or_just_salesforce"
    situation_affinity:
      scope_management: 0.7
      assessment: 0.5
      
  - id: T_UNDERSTANDING_DEMONSTRATED
    description: "User uses system terminology"
    response_to: "user_correctly_uses_bottleneck_MIN_etc"
    situation_affinity:
      education: 0.3
      assessment: 0.7

# INAPPROPRIATE USE TRIGGERS (8 triggers)
inappropriate_use:
  - id: T_OFF_TOPIC_DETECTED
    type: user_implicit
    description: "User message is unrelated to AI assessment"
    keywords: ["weather", "joke", "story", "recipe", "game", "chat", "talk about"]
    priority: medium
    situation_affinity:
      inappropriate_use: 1.0
      
  - id: T_REPEATED_OFF_TOPIC
    type: system_reactive
    description: "User has gone off-topic multiple times"
    condition: "off_topic_count >= 2"
    priority: high
    situation_affinity:
      inappropriate_use: 1.0
      
  - id: T_TESTING_LIMITS
    type: user_implicit
    description: "User is testing system boundaries"
    keywords: ["can you", "will you", "are you able", "what if", "try this"]
    priority: medium
    situation_affinity:
      inappropriate_use: 0.8
      
  - id: T_NONSENSE_INPUT
    type: user_implicit
    description: "User input is gibberish or nonsensical"
    pattern: "random_characters_or_repeated_words"
    priority: high
    situation_affinity:
      inappropriate_use: 1.0
      
  - id: T_HUMOR_DETECTED
    type: user_implicit
    description: "User is being funny but off-topic"
    keywords: ["haha", "lol", "joke", "kidding", "just messing"]
    priority: low
    situation_affinity:
      inappropriate_use: 0.5
      error_recovery: 0.3
      
  - id: T_PERSISTENT_MISUSE
    type: system_reactive
    description: "User continues inappropriate use after redirects"
    condition: "off_topic_count >= 4"
    priority: critical
    situation_affinity:
      inappropriate_use: 1.0
      
  - id: T_NO_PROGRESS_MADE
    type: system_reactive
    description: "Multiple turns without assessment progress"
    condition: "turns_since_progress >= 5 AND no_outputs_identified"
    priority: high
    situation_affinity:
      inappropriate_use: 0.7
      navigation: 0.6
